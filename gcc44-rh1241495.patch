2015-12-15  Jakub Jelinek  <jakub@redhat.com>

	* gcc-interface/Makefile.in (gnatlib-shared-default): Drop
	-Wl,-z,nodlopen, since GCC 4.3 libgnat and libgnarl doesn't use
	trampolines.

--- gcc/ada/gcc-interface/Makefile.in.jj	2009-11-19 15:15:22.000000000 +0100
+++ gcc/ada/gcc-interface/Makefile.in	2015-12-15 18:15:50.336636179 +0100
@@ -2082,13 +2082,13 @@ gnatlib-shared-default:
 	     THREAD_KIND="$(THREAD_KIND)" \
              gnatlib
 	$(RM) $(RTSDIR)/libgna*$(soext)
-	cd $(RTSDIR); ../../xgcc -B../../ -shared -Wl,-z,nodlopen $(GNATLIBCFLAGS) \
+	cd $(RTSDIR); ../../xgcc -B../../ -shared $(GNATLIBCFLAGS) \
 		$(TARGET_LIBGCC2_CFLAGS) \
 		-o libgnat$(hyphen)$(LIBRARY_VERSION)$(soext) \
 		$(GNATRTL_NONTASKING_OBJS) $(LIBGNAT_OBJS) \
 		$(SO_OPTS)libgnat$(hyphen)$(LIBRARY_VERSION)$(soext) \
 		$(MISCLIB) -lm
-	cd $(RTSDIR); ../../xgcc -B../../ -shared -Wl,-z,nodlopen $(GNATLIBCFLAGS) \
+	cd $(RTSDIR); ../../xgcc -B../../ -shared $(GNATLIBCFLAGS) \
 		$(TARGET_LIBGCC2_CFLAGS) \
 		-o libgnarl$(hyphen)$(LIBRARY_VERSION)$(soext) \
 		$(GNATRTL_TASKING_OBJS) \
